<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <script>
        // åŠ¨æ€è®¾ç½®baseæ ‡ç­¾ï¼Œæ ¹æ®ç¯å¢ƒè‡ªåŠ¨é€‰æ‹©è·¯å¾„
        (function() {
            var base = document.createElement('base');
            if (window.location.protocol === 'file:') {
                // æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿï¼Œä½¿ç”¨ç›¸å¯¹è·¯å¾„
                base.href = './';
            } else {
                // æ£€æµ‹å½“å‰URLè·¯å¾„å’Œä¸»æœºå
                var pathname = window.location.pathname;
                var hostname = window.location.hostname;
                
                // æ£€æµ‹æ˜¯å¦æ˜¯Cloudflareéƒ¨ç½²ï¼ˆé€šè¿‡è‡ªå®šä¹‰åŸŸåï¼‰
                var isCloudflare = hostname !== 'liuzhifu1024.github.io' && 
                                   hostname !== 'localhost' && 
                                   hostname !== '127.0.0.1';
                
                // å¦‚æœè·¯å¾„åŒ…å« /lovetest1/ï¼Œä½¿ç”¨ç»å¯¹è·¯å¾„
                if (pathname.indexOf('/lovetest1/') !== -1 || pathname.startsWith('/lovetest1')) {
                    // Cloudflareå¯èƒ½éœ€è¦ç›¸å¯¹è·¯å¾„æ¥é¿å…SPAé‡å†™é—®é¢˜
                    if (isCloudflare) {
                        base.href = './';
                    } else {
                        base.href = '/lovetest1/';
                    }
                } else {
                    // æœ¬åœ°å¼€å‘æœåŠ¡å™¨æˆ–æ ¹ç›®å½•éƒ¨ç½²ï¼Œä½¿ç”¨ç›¸å¯¹è·¯å¾„
                    base.href = './';
                }
            }
            document.head.insertBefore(base, document.head.firstChild);
        })();
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>çŸ¥æƒ…åŒæ„ä¹¦ - æ‹çˆ±å æœ‰æ¬²æŒ‡æ•°æµ‹è¯•</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/consent.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ’•</text></svg>">
</head>
<body>
    <div class="consent-page">
        <div class="container">
            <h1 class="page-title">
                <span class="page-icon">ğŸ“„</span>
                çŸ¥æƒ…åŒæ„ä¹¦
            </h1>
            
            <div class="consent-content">
                <div class="consent-section">
                    <h2 class="section-title">
                        <span class="section-icon">ğŸ¯</span>
                        è¯„ä¼°ç›®çš„
                    </h2>
                    <p>æœ¬æµ‹è¯•æ—¨åœ¨å¸®åŠ©æ‚¨äº†è§£è‡ªèº«æˆ–æ‹äººåœ¨æ‹çˆ±å…³ç³»ä¸­çš„å æœ‰æ¬²ç¨‹åº¦ï¼Œé€šè¿‡ç§‘å­¦çš„RPIæŒ‡æ•°è®¡ç®—æ–¹æ³•ï¼Œæä¾›å®¢è§‚çš„è¯„ä¼°ç»“æœã€‚æµ‹è¯•ç»“æœä»…ä¾›å‚è€ƒï¼Œä¸æ„æˆä»»ä½•åŒ»å­¦æˆ–å¿ƒç†è¯Šæ–­ã€‚</p>
                </div>
                
                <div class="consent-section">
                    <h2 class="section-title">
                        <span class="section-icon">ğŸ”’</span>
                        éšç§ä¿æŠ¤
                    </h2>
                    <p>æˆ‘ä»¬ä¸¥æ ¼éµå®ˆã€Šä¸­åäººæ°‘å…±å’Œå›½ä¸ªäººä¿¡æ¯ä¿æŠ¤æ³•ã€‹ï¼Œ<span class="highlight">å®Œå…¨åŒ¿å</span>ï¼Œ<span class="highlight">æœ¬åœ°å­˜å‚¨</span>ã€‚æ‰€æœ‰ç­”é¢˜æ•°æ®ã€è®¡ç®—ç»“æœå‡å­˜å‚¨äºæ‚¨çš„è®¾å¤‡æœ¬åœ°ï¼Œä¸ä¼šä¸Šä¼ åˆ°æœåŠ¡å™¨æˆ–ç¬¬ä¸‰æ–¹å¹³å°ã€‚</p>
                </div>
                
                <div class="consent-section">
                    <h2 class="section-title">
                        <span class="section-icon">âœ‹</span>
                        è‡ªæ„¿å‚ä¸
                    </h2>
                    <p>å‚ä¸æœ¬æµ‹è¯•å®Œå…¨åŸºäºæ‚¨çš„è‡ªæ„¿é€‰æ‹©ã€‚æ‚¨å¯ä»¥éšæ—¶æš‚åœæˆ–é€€å‡ºæµ‹è¯•ï¼Œå·²ä¿å­˜çš„æ•°æ®å¯ä»¥éšæ—¶åˆ é™¤ã€‚</p>
                </div>
                
                <div class="consent-section">
                    <h2 class="section-title">
                        <span class="section-icon">âš ï¸</span>
                        éè¯Šæ–­æ€§è´¨
                    </h2>
                    <p><span class="highlight">éè¯Šæ–­æ€§è´¨</span>ï¼šæœ¬æµ‹è¯•ä¸æ„æˆä»»ä½•åŒ»å­¦æˆ–å¿ƒç†è¯Šæ–­ï¼Œ<span class="highlight">RPIæŒ‡æ•°ä»…ä½œå‚è€ƒ</span>ã€‚å¦‚æ‚¨æœ‰ä¸¥é‡çš„å¿ƒç†å›°æ‰°ï¼Œå»ºè®®å’¨è¯¢ä¸“ä¸šå¿ƒç†åŒ»ç”Ÿã€‚</p>
                </div>
                
                <div class="consent-section">
                    <h2 class="section-title">
                        <span class="section-icon">ğŸ’¾</span>
                        é‡è¦æé†’
                    </h2>
                    <p>æ•°æ®å­˜å‚¨äºæœ¬åœ°LocalStorageï¼Œæ¸…é™¤ç¼“å­˜æˆ–æ›´æ¢è®¾å¤‡å°†ä¸¢å¤±æ•°æ®ã€‚æµ‹è¯•ç»“æœåŸºäº2025ç‰ˆäººç¾¤å¸¸æ¨¡æ•°æ®è®¡ç®—ï¼Œä»…ä¾›å‚è€ƒã€‚</p>
                </div>
            </div>
            
            <div class="consent-confirm">
                <label class="checkbox-label">
                    <input type="checkbox" id="consentCheckbox">
                    <span>æˆ‘å·²é˜…è¯»å¹¶åŒæ„ä¸Šè¿°å†…å®¹</span>
                </label>
                <button id="nextBtn" class="btn-primary" disabled>ä¸‹ä¸€æ­¥</button>
            </div>
        </div>
    </div>

    <script src="js/storage.js"></script>
    <script src="js/utils.js"></script>
    <script>
        // è·å–URLå‚æ•°
        const urlParams = new URLSearchParams(window.location.search);
        const authCode = urlParams.get('authCode');
        const testType = urlParams.get('testType');
        
        // å¦‚æœæ²¡æœ‰å‚æ•°ï¼Œè¿”å›é¦–é¡µ
        if (!authCode || !testType) {
            window.location.href = 'index.html';
        }
        
        // åŒæ„å¤é€‰æ¡†äº‹ä»¶
        const consentCheckbox = document.getElementById('consentCheckbox');
        const nextBtn = document.getElementById('nextBtn');
        
        consentCheckbox.addEventListener('change', function() {
            nextBtn.disabled = !this.checked;
            if (this.checked) {
                nextBtn.style.background = '#E87A90';
            } else {
                nextBtn.style.background = '#D4D4D4';
            }
        });
        
        // ä¸‹ä¸€æ­¥æŒ‰é’®äº‹ä»¶
        nextBtn.addEventListener('click', function() {
            if (consentCheckbox.checked) {
                // æ˜¾ç¤ºæµ‹è¯•é¡»çŸ¥
                showTestNotice();
            }
        });
        
        function showTestNotice() {
            const notice = `
æµ‹è¯•é¡»çŸ¥ï¼š
â€¢ æµ‹è¯•è€—æ—¶ï¼š5-10åˆ†é’Ÿ
â€¢ ç­”é¢˜è§„åˆ™ï¼šè¯·æ ¹æ®çœŸå®æƒ…å†µé€‰æ‹©ï¼Œæ— å¯¹é”™ä¹‹åˆ†
â€¢ é¢˜ç›®æ•°é‡ï¼šå…±40é¢˜ï¼Œæ¯é¢˜å¿…ç­”
â€¢ å¯ä»¥ä¸­é€”æš‚åœï¼Œä¸‹æ¬¡å¯ç»§ç»­ç­”é¢˜
            `;
            
            if (confirm(notice + '\n\nç‚¹å‡»"ç¡®å®š"å¼€å§‹æµ‹è¯•')) {
                window.location.href = `info.html?authCode=${authCode}&testType=${testType}`;
            }
        }
    </script>
</body>
</html>

