# 恋爱占有欲指数测试网站需求报告（完整版）

## 一、项目概述

本项目为专业恋爱心理评估工具类网站，基于 “控制欲望、嫉妒强度、情感依赖、关系不安” 四大核心维度的标准化题库，通过科学的 RPI 恋爱占有欲指数计算方法，帮助用户量化自身或恋人的恋爱占有欲程度。网站采用纯前端架构，所有答题数据、计算结果均存储于用户设备本地，保障隐私安全，同时支持多设备适配与灵活授权管理，最终通过个性化报告与专业建议，引导用户认知亲密关系中的占有欲特征，促进健康恋爱关系发展。

## 二、核心功能模块

### 2.1 测试流程全链路

需实现从入口到报告管理的完整闭环，各环节逻辑衔接顺畅，具体流程如下：



1. **首页引导**：用户进入网站后，选择测试视角（给自己测 / 为恋人测），明确测试方向；

2. **授权码验证**：选择测试类型后触发授权码验证弹窗，验证通过方可进入下一环节；

3. **知情同意确认**：展示详细的知情同意书，用户需主动勾选确认后，解锁测试须知；

4. **测试须知弹窗**：告知用户测试耗时（5-10 分钟）、答题规则（按真实情况选择，无对错之分），用户点击 “开始测试” 进入信息填写页；

5. **个人信息采集**：收集用户基础信息（年龄段、性别、恋爱状态、恋爱持续时间），所有字段标注必填 / 选填，信息填写完成后进入分页答题环节；

6. **分页答题**：按题目顺序分页展示（每屏 1 题），支持中途暂停与进度恢复，答题完成后自动进入 RPI 指数计算与报告生成阶段；

7. **报告生成与查看**：基于答题结果与 RPI 计算方法生成包含多维度分析的测试报告，支持导出与本地保存；

8. **记录管理**：用户可在 “我的测试记录” 页面查看历史报告，支持按视角、时间、RPI 指数范围筛选与删除操作。

### 2.2 双视角测试体系

#### 2.2.1 给自己测（第一人称视角）



* **题库规格**：包含 4 个维度量表（控制欲望、嫉妒强度、情感依赖、关系不安），每个量表 10 题，总计 40 题，题目以 “我” 为表述主体，聚焦自我行为与心理感受，题库已放在 给自己测  题库.docx；

* **选项类型**：题目选项分为两类，统一正向计分（1-5 分）：

1. 态度类：1. 非常不同意；2. 不同意；3. 中性；4. 同意；5. 非常同意

2. 频率类：1. 从不；2. 很少；3. 有时；4. 经常；5. 总是

* **评分逻辑**：

1. 原始分计算：各维度原始分为该量表下 10 题得分之和（满分 50 分，最低 10 分），本地需记录每道题具体得分（便于数据校验与报告回溯）；

2. RPI 指数计算：

* 第一步：四维度标准化，基于预设人群常模（10000 + 恋爱人群样本），将各维度原始分转换为 z 分数（z = (X - μ) / σ，X 为用户维度原始分，μ 为该维度常模均值，σ 为该维度常模标准差），确保不同维度分数可比性；

* 第二步：等权重合成，将四个维度 z 分数取平均值（各维度权重均为 0.25），得到合成 z 分数；

* 第三步：百分位数转换，通过标准正态累积分布函数 (CDF) 将合成 z 分数转换为 0-100 分的 RPI 恋爱占有欲指数，分数越高代表占有欲越强。

#### 2.2.2 为恋人测（观察者视角）



* **题库规格**：与 “给自己测” 维度一致（控制欲望、嫉妒强度、情感依赖、关系不安，各 10 题），总计 40 题，题目以 “Ta” 为表述主体，基于可观察的伴侣行为设计，题库与第一视角完全分离，题库已放在 为恋人测 题库.docx；

* **选项类型**：与 “给自己测” 完全一致（态度类 / 频率类，1-5 分正向计分），确保评分标准统一；

* **评分逻辑**：同第一视角，采用 RPI 恋爱占有欲指数计算方法，支持在报告中与 “自我测试” 结果进行对比分析（若用户同时完成两种测试）。

#### 2.2.3 RPI 计算方法补充说明



* **人群常模**：基于 10000 + 恋爱人群样本调研数据（涵盖不同年龄段、恋爱状态），确保 z 分数转换的科学性与代表性，常模数据可通过管理员后台更新，标注版本号；

* **CDF 函数实现**：采用误差函数 erf 近似计算标准正态累积分布（CDF (z) = 0.5 \* (1 + erf (z / √2))），误差小于 0.1%，确保转换后百分位数精准映射（z=-2 对应约 2 分，z=0 对应 50 分，z=2 对应约 98 分）；

* **异常处理**：若某维度原始分超出常模数据范围（高于 99% 分位数或低于 1% 分位数），在报告中标注 “该维度得分超出常模范围，结果仅供参考”；若计算过程中出现数据异常，提示用户重新检查答题数据或重试。

### 2.3 授权码管理系统

#### 2.3.1 授权码属性



* 格式规则：10 位字符组合（大写字母 + 小写字母 + 数字），确保唯一性（生成时自动校验去重）；

* 有效期设置：支持管理员自定义（1 天 / 2 天 / 7 天 / 30 天 / 365 天），从首次验证通过时间开始计算；

* 状态管理：包含 “未使用”“部分完成”（已答题未生成报告）“已使用”“已过期” 四种状态，实时同步至管理员后台。

#### 2.3.2 验证逻辑与前端交互


* 格式验证：用户输入时实时校验字符长度与组成，不符合规则即时提示 “授权码格式错误（需 10 位字母 + 数字组合）”；

* 状态验证：已过期提示 “授权码已过期，请联系管理员获取新码”，已使用提示 “授权码已完成测试，仅支持一码一测”，部分完成提示 “检测到未完成测试，是否恢复进度”；

* 关联逻辑：每个授权码可以分别给自己测2次，为恋人测2次，超过该次数限制，则无法重新测试，但能查看之前的测试报告。


* **功能按钮交互**：

1. “获取授权码” 按钮：位于授权码验证页面

* 样式：背景色 #FF9F43，文字白色，padding10px 20px，圆角 4px，hover 时背景色加深 10%（#F59030）；

* 跳转逻辑：点击后通过前端接口获取管理员在后台配置的 “小红书店铺链接”，在新标签页打开该链接（避免当前测试流程中断）；

* 异常处理：若管理员未配置链接或链接无效，点击后提示 “获取授权码的链接暂未配置，请稍后尝试”（红色文字，位于按钮下方）；

1. “商务合作” 按钮：位于授权码验证页面

* 样式：透明边框（1px solid #666），文字颜色 #666，padding10px 20px，圆角 4px，hover 时背景色 #F5F5F5；

* 弹窗逻辑：点击后弹出小型弹窗（宽度 300px，高度 150px，居中显示），弹窗内容为管理员在后台配置的 “商务合作文案”（默认文案：“商务合作，请联系客服，微信：renzhi6767”）；

* 弹窗交互：弹窗包含 “确定” 按钮（背景色 #E87A90，文字白色，点击关闭弹窗），支持点击弹窗外部空白处关闭，弹窗文字字号 14px，颜色 #333，行距 1.5 倍。

#### 2.3.3 管理员后台功能


* 批量生成：支持输入生成数量（1-1000 个），一键生成授权码，自动规避重复；

* 导出功能：生成的授权码支持 CSV 格式导出（含授权码、有效期、生成时间、初始状态）；

* 状态管理：支持单个 / 批量修改有效期、作废授权码，实时查看各授权码使用状态、使用时间及对应答题进度；

* 检索功能：支持通过授权码关键词、状态、有效期范围筛选查询；

* **链接与文案配置模块**：

1. “获取授权码” 链接配置：

* 功能：提供输入框（支持 http/https 协议），管理员可填写小红书店铺链接或其他授权码获取渠道链接；

* 校验：输入链接后自动校验格式（是否包含 http/https），格式错误时提示 “请输入有效的链接（需包含 http/https）”；

* 保存：点击 “保存” 按钮后，链接实时生效，前端 “获取授权码” 按钮跳转时自动调用最新配置的链接；

1. “商务合作” 文案配置：

* 功能：提供文本输入框（支持换行，最大字符数 200），管理员可自定义弹窗显示的商务合作内容（如联系方式、合作范围等）；

* 预览：输入文案后可点击 “预览” 按钮，弹出模拟弹窗查看显示效果；

* 保存：点击 “保存” 按钮后，文案实时更新，前端 “商务合作” 按钮点击时显示最新配置的内容；

1. 配置记录：后台记录最近 3 次的配置修改历史（含修改时间、修改内容、修改人），支持查看历史版本，便于回溯。

### 2.4 本地存储机制

#### 2.4.1 存储内容



* 用户数据：个人信息（年龄段、性别、恋爱状态等）、测试视角选择记录；

* 答题数据：授权码关联的答题进度（当前答题序号、各题所选选项及得分、选项类型）、答题开始时间与暂停时间；

* 计算数据：各维度原始分、z 分数、合成 z 分数、RPI 指数及计算过程数据；

* 报告数据：生成的测试报告（含可视化图表数据）、报告生成时间、题库版本号；

* 系统数据：授权码验证记录、浏览器适配信息、常模版本号、前端缓存的 “获取授权码” 链接有效期（1 小时，到期自动重新请求最新链接）。

#### 2.4.2 存储规则



* 唯一性：以 “授权码 + 题库版本号” 为唯一标识关联所有数据，避免混淆；

* 持久化：数据长期存储于 LocalStorage，除非用户主动删除或清除浏览器缓存；

* 自动备份：答题过程中每完成 1 题自动保存进度与得分，RPI 指数计算完成后即时保存结果，避免意外关闭页面导致数据丢失；

* 容量监测：存储前检测 LocalStorage 剩余容量，不足时触发提示 “设备存储空间不足，建议清理浏览器缓存后重试”；

* 链接缓存：前端首次加载时请求 “获取授权码” 链接，缓存至 LocalStorage，有效期 1 小时，到期后自动重新请求，确保使用最新配置链接。

### 2.5 报告生成与导出

#### 2.5.1 报告内容规范



* **指数总览区**：


  * 展示 RPI 指数（大号字体，颜色 #E87A90）、分级（低占有欲：0-30 分，中等占有欲：31-60 分，高占有欲：61-100 分）；

  * 整体解读：结合常模对比与四大维度核心特征，给出客观结论（如 “低占有欲（25 分）：你在恋爱中松弛有度，尊重伴侣边界，RPI 指数低于 60% 的受测人群”）；

  * 补充说明：标注 “基于 RPI 指数计算方法，参考 2025 版人群常模”。

* **维度拆解区**：


  * 分维度展示：按控制欲望、嫉妒强度、情感依赖、关系不安顺序排列，每个维度包含原始分（10-50 分）、z 分数（标注正负值及常模排名）、核心含义、得分解读（结合选项类型说明，如 “频率类题目得分偏高，显示你在相关行为上表现较频繁”）；

  * 极端选项标注：若某题选择 1 分或 5 分（极端选项），单独标注并补充分析；


* **可视化分析区**：


  * 维度原始分柱状图：展示 4 个维度原始分，颜色区分维度（控制欲望 #E87A90、嫉妒强度 #9D80FE、情感依赖 #FF9F43、关系不安 #4CAF50），支持悬浮查看维度核心特征；

  * RPI 指数雷达图：展示四个维度百分位得分（0-100 分），直观呈现各维度均衡程度，支持放大查看细节。

* **专家建议区**：


  * 给自己测：针对各维度 z 分数与 RPI 总指数，结合选项类型场景给出可落地建议（如 “嫉妒强度 z=1.2：当看到伴侣与异性互动时，尝试用‘我有点在意’替代质问，减少冲突”）；

  * 为恋人测：给出针对性沟通建议，结合伴侣维度特征与常模差异（如 “伴侣关系不安 z=0.9：晚归时主动提前告知，缓解其不安全感”）。

* **沟通技巧指南区**：


  * 分类包含 “‘我’式表达”“积极倾听”“边界协商”“冲突化解” 4 类技巧，每类含错误示例、正确示例及适配场景（结合占有欲维度与选项类型）；

  * 添加 “立即实践” 引导，帮助用户将技巧应用于实际亲密关系。

#### 2.5.2 导出功能



* 格式支持：支持 PDF 与图片（PNG/JPG）两种格式，完整保留 RPI 指数、维度数据、可视化图表及计算说明；

* 命名规则：默认文件名格式为 “恋爱占有欲测试报告\_【视角类型】*【RPI 指数】*【授权码后 4 位】\_【生成日期 YYYYMMDD】.pdf/PNG”；

* 导出体验：点击导出显示进度提示，完成后自动触发下载，PDF 格式支持文本复制，确保数据可读性与复用性。

### 2.6 响应式设计适配

#### 2.6.1 设备适配范围



* 移动端：支持手机屏幕（320px-480px）、平板屏幕（768px-1024px），适配竖屏（手机）与横竖屏切换（平板）；

* PC 端：支持桌面显示器（1024px-2560px），最大内容宽度限制为 1200px，避免宽屏内容分散。

#### 2.6.2 各端优化细节



* **手机端**：


  * 文字适配：题目文字最小字号 14px，RPI 指数与维度分数字号 18-20px，z 分数标注字号 14px（颜色 #E87A90）；

  * 交互优化：选项间距不小于 12px，分页按钮固定在屏幕底部（高度≥44px），进度条显示 “第 X 题 / 共 40 题”；

  * 弹窗处理：授权码验证弹窗、商务合作弹窗采用全屏半透明样式（宽度 90%，高度自适应），报告雷达图支持双指缩放；

  * 按钮适配：“获取授权码”“商务合作” 按钮在手机端横向排列（各占 48% 宽度），避免纵向占用过多空间。

* **PC 端**：


  * 布局优化：答题与报告区域居中展示，个人信息填写页采用两列布局，报告维度拆解区采用四列布局（维度名称、原始分、z 分数、百分位）；

  * 交互优化：支持键盘快捷键（Enter 提交答案、方向键切换题目），鼠标悬浮 RPI 指数或 z 分数显示计算说明 tooltip；

  * 可视化优化：雷达图尺寸≥600px，支持悬浮查看维度得分、z 分数及常模对比，点击维度名称高亮对应雷达边；

  * 弹窗适配：商务合作弹窗在 PC 端固定尺寸（宽度 300px，高度 150px），居中显示，文字排版更紧凑。

#### 2.6.3 浏览器适配



* 支持浏览器：Chrome（80+）、Safari（13+）、Edge（80+）、Firefox（75+）、微信内置浏览器（最新版）；

* 兼容处理：老旧浏览器（如 IE）进入时显示升级提示，提供主流浏览器下载链接；

* 特性适配：不支持 LocalStorage 的浏览器显示 “无法保存数据，建议更换浏览器” 提示；

* 链接兼容性：“获取授权码” 跳转链接在各浏览器中均支持新标签页打开，避免浏览器兼容性导致的跳转失败。

## 三、页面设计与交互规范

### 3.1 页面结构

#### 3.1.1 首页



* 头部区域：网站名称 “恋爱占有欲指数计算器”（字号 28-32px，颜色 #E87A90），顶部滚动公告栏（背景 #F8F9FA，文字 #666），右上角未成年人提示（字号 12px，颜色 #FF6B6B）；

* 主体区域：简介板块（含网站定位、核心价值、RPI 计算方法简述，文字 #333，行距 1.6 倍），两个核心测试按钮（“给自己测”“为恋人测”，背景色分别为 #E87A90、#9D80FE，文字白色），底部链接（“关于我们”“隐私政策”“RPI 计算方法说明”“联系客服”，字号 14px，颜色 #666）；

* 交互细节：测试按钮 hover 时背景色加深 10%，点击触发授权码弹窗；“RPI 计算方法说明” 点击跳转详情页。

#### 3.1.2 授权码验证弹窗（补充按钮设计）



* 弹窗结构：标题 “授权码验证”（字号 18px，颜色 #333），授权码输入框（宽度 280px，高度 40px，padding0 10px，边框 1px solid #DDD，右侧 “查看格式” 图标（hover 显示 “需 10 位字母 + 数字组合”）），三条提示文字（含 “一码一测”“本地存储” 等，前加 “√” 图标，字号 12px，颜色 #666）；

* **功能按钮区域**：


  * 布局：两个按钮横向排列（间距 10px），总宽度与输入框一致（280px）；

  * “获取授权码” 按钮：宽度 60%，背景 #FF9F43，文字白色，字号 14px，圆角 4px，hover 背景 #F59030；

  * “商务合作” 按钮：宽度 35%，透明边框 1px solid #666，文字 #666，字号 14px，圆角 4px，hover 背景 #F5F5F5；

* 关闭逻辑：右上角 “×” 图标（20px×20px）或点击空白处关闭，关闭时清空输入框内容；

* 异常提示区域：按钮下方预留 15px 高度空间，用于显示链接无效、文案加载失败等提示（红色文字，字号 12px）。

#### 3.1.3 商务合作弹窗设计



* 弹窗容器：宽度 300px（PC 端）/90% 屏幕宽度（手机端），高度自适应，背景白色，圆角 8px，阴影 0 2px 10px rgba (0,0,0,0.1)，padding20px；

* 内容区域：文字内容（管理员配置的商务合作文案，字号 14px，颜色 #333，行距 1.5 倍，margin-bottom20px）；

* 按钮区域：“确定” 按钮（宽度 100%，高度 40px，背景 #E87A90，文字白色，字号 14px，圆角 4px，hover 背景 #D86A30）；

* 交互：点击 “确定” 按钮或弹窗外部空白处关闭弹窗，弹窗弹出时添加淡入动画（时长 300ms），关闭时添加淡出动画。

#### 3.1.4 知情同意页面



* 页面结构：标题 “知情同意书”（字号 20px，颜色 #333，居中），分板块展示 “评估目的”“隐私保护”“自愿参与”“非诊断性质”“重要提醒”（板块标题加粗，颜色 #E87A90，内容字号 14px）；

* 关键信息：“完全匿名”“本地存储”“非诊断性质”“RPI 指数仅作参考” 等核心内容标红（#FF6B6B）；

* 确认区域：复选框 +“下一步” 按钮（复选框未勾选时按钮禁用，背景 #D4D4D4；勾选后背景 #E87A90）。

#### 3.1.5 个人信息填写页



* 页面结构：标题 “基本信息填写”（字号 18px，颜色 #333），提示文字 “信息将帮助精准对比常模，仅本地存储”（字号 14px，颜色 #666）；

* 表单区域：按 “年龄段→性别→恋爱状态→恋爱持续时间” 顺序排列，必填字段标注 “\*”（颜色 #FF6B6B），单选按钮选中时颜色 #E87A90，未选中 #999；

* 提交按钮：“开始测试”（背景 #E87A90，文字白色，底部居中），点击前校验必填字段，未填写提示 “请完善所有必填信息”。

#### 3.1.6 分页答题页



* 顶部区域：进度条（已完成部分 #E87A90，未完成 #F0F0F0），右侧显示 “第 X 题 / 共 40 题”（字号 14px，颜色 #666），下方标注所属维度（如 “【控制欲望】”，字号 12px，颜色 #9D80FE）；

* 题目区域：居中展示题目内容（字号 16px，颜色 #333，行距 1.5 倍），选项纵向排列（背景 #F8F9FA，选中时 #E87A90，文字白色，间距 12px，padding10px）；

* 操作区域：底部 “上一题”（背景 #F0F0F0，文字 #666，第 1 题禁用）与 “下一题”（背景 #E87A90，文字白色，第 40 题改为 “提交答案”），按钮上方显示答题规则提示（字号 12px，颜色 #666）。

#### 3.1.7 报告页面



* 头部区域：报告标题、生成时间、测试视角，右侧 “导出 PDF”“导出图片”“返回记录” 按钮（图标 + 文字，hover 背景 #F0F0F0），“查看 RPI 计算详情” 链接（字号 12px，颜色 #9D80FE）；

* 内容区域：按 “指数总览→维度拆解→可视化分析→专家建议→沟通技巧” 顺序排列，板块间用分隔线（#F0F0F0）分隔，RPI 指数突出显示（字号 32px，颜色 #E87A90）；

* 交互细节：支持板块折叠 / 展开，雷达图支持放大，专家建议支持复制，维度 z 分数点击查看常模分布详情。

#### 3.1.8 我的测试记录页面



* 标题：“我的测试记录”（字号 18px，颜色 #333）；

* 筛选区域：支持按 “测试视角”“生成时间”“RPI 指数范围” 筛选（下拉菜单，背景 #F8F9FA）；

* 记录列表：每条记录含 “测试视角”“生成时间”“RPI 指数”“授权码后 4 位”“查看报告”“删除” 按钮（列表项 hover 背景 #F8F9FA，删除按钮颜色 #FF6B6B，点击弹出确认弹窗）；

* 空状态：无记录时显示 “暂无测试记录，点击开始测试生成报告”（字号 16px，颜色 #999），下方添加 “开始测试” 按钮。

### 3.2 交互细节规范

#### 3.2.1 弹窗交互



* 打开逻辑：弹窗采用 “淡入 + 居中” 动画（300ms），背景半透明遮罩（60% 透明度 #000），遮罩点击可关闭；

* 关闭逻辑：弹窗右上角 “×” 图标（24px×24px），点击触发 “淡出” 动画（200ms），关闭时清空临时输入；

* 输入反馈：授权码输入非字母 / 数字时，输入框边框变红（#FF6B6B），显示 “仅支持字母和数字” 提示（字号 12px）。

#### 3.2.2 加载状态



* 全局加载：RPI 指数计算、报告生成等耗时操作显示全屏加载动画（旋转爱心 + 场景化文字提示，颜色 #E87A90）；

* 局部加载：“获取授权码” 链接请求、“商务合作” 文案加载时，按钮上显示小型加载动画（旋转圆圈，尺寸 16px，颜色白色 /#666），加载期间按钮禁用；

* 加载失败：超时（10 秒）显示 “加载超时，请点击重试”，RPI 计算失败提示 “数据异常，建议重新测试”，链接 / 文案加载失败提示 “配置内容加载失败，请稍后尝试”。

#### 3.2.3 错误提示



* 提示样式：“感叹号图标 + 文字” 组合（颜色 #FF6B6B，背景 #FFF5F5，边框 #FFE5E5，padding10px）；

* 场景适配：


  * 网络异常：“网络开小差了，RPI 计算无需网络，但页面加载需网络支持”，含 “重试” 按钮；

  * 授权码错误：按 “格式错误 / 已过期 / 已使用 / 不存在” 精准提示；

  * 存储不足：“存储空间不足，建议清理浏览器缓存”，含 “查看清理教程” 链接；

  * 答题不完整：提交时提示 “存在未答题，是否返回补答”；

  * 链接无效：“获取授权码的链接暂不可用，请联系管理员”；

  * 文案加载失败：“商务合作内容加载失败，请稍后尝试”。

## 四、隐私与安全规范

### 4.1 隐私保护机制

#### 4.1.1 数据存储安全



* 存储范围：仅存储用户主动输入的个人信息、答题数据、RPI 计算结果，不收集浏览器、设备等非必要数据；

* 存储说明：知情同意书明确 “数据存储于本地 LocalStorage，清除缓存或更换设备将丢失”；

* 数据删除：“我的测试记录” 支持单条 / 批量删除，删除前明确提示 “删除后不可恢复，网站无备份”，操作不可逆；

* 配置信息安全：管理员配置的 “获取授权码” 链接、“商务合作” 文案仅通过前端接口传输，不存储于用户本地，避免信息泄露。

#### 4.1.2 合规声明



* 法规适配：隐私政策明确 “遵守《中华人民共和国个人信息保护法》，不收集、不传输、不共享用户信息”；

* 未成年人保护：首页提示 “18 岁以下需监护人陪同”，选择 “18 岁以下” 引导监护人确认页面，未确认无法进入测试。

### 4.2 安全防护措施



* 授权码安全：随机算法生成确保唯一性，本地存储采用 Base64 编码加密，防止明文泄露；

* 数据防篡改：RPI 计算结果存储时添加校验码，查看报告时校验完整性，校验失败提示 “数据损坏，建议重试”；

* 异常行为监测：同一设备 1 小时内输入错误授权码超 5 次，临时禁止验证 30 分钟，提示 “输入错误过多，请稍后重试”；

* 配置接口安全：管理员获取 / 修改 “链接与文案配置” 的接口需登录验证，支持 IP 白名单限制（仅指定 IP 可访问），防止未授权修改。

## 五、异常处理机制

### 5.1 网络异常



* 检测时机：授权码验证、页面跳转、导出报告、请求 “获取授权码” 链接、请求 “商务合作” 文案前检测网络状态；

* 提示内容：“网络异常，请检查网络后重试。RPI 计算无需网络，但页面加载、链接跳转与文案加载需网络支持”，含 “重试” 按钮；

* 数据保护：答题时网络中断自动保存进度，恢复后提示 “是否继续答题”，点击 “是” 恢复上次页面；链接 / 文案请求失败时，点击 “重试” 重新发起请求。

### 5.2 授权码异常



* 重复使用：已生成报告的授权码再次验证，提示 “授权码已使用，如需复测请获取新码”，提供 “前往获取授权码” 按钮（点击跳转管理员配置的链接）；

* 过期：超有效期提示 “授权码已过期，关联数据仍可本地查看”，提供 “前往获取授权码” 按钮；

* 无效码：输入未生成过的授权码，提示 “授权码不存在，请核对后重新输入”。

### 5.3 本地存储异常



* 存储不足：剩余容量＜1MB 时提示 “存储空间不足，建议清理浏览器缓存”；

* 存储禁用：浏览器禁用 LocalStorage 时，显示全屏提示页（含开启教程）；

* 数据损坏：校验失败提示 “测试数据损坏，报告结果可能不准确，建议重新测试”。

### 5.4 答题与计算异常



* 选项未选择：提交时检测到未答题，提示 “存在 X 道未答题，是否返回补答”；

* 得分超出范围：维度原始分＜10 分或＞50 分，提示 “得分异常，建议检查答案”；

* 常模数据缺失：未加载到常模时提示 “常模数据未加载，是否使用默认常模计算”。

### 5.5 链接与文案配置异常



* “获取授权码” 链接异常：


  * 未配置：点击按钮后提示 “管理员暂未配置授权码获取链接，请稍后尝试”；

  * 格式错误：管理员配置的链接不含 http/https，前端请求时提示 “授权码获取链接格式错误，请联系管理员修正”；

  * 跳转失败：链接无法打开（如 404、500 错误），前端不做拦截（由浏览器默认提示），但后台记录跳转失败日志；

* “商务合作” 文案异常：


  * 未配置：点击按钮后弹窗显示默认文案 “商务合作，请联系客服，微信：renzhi6767”；

  * 加载失败：请求文案超时或接口错误，弹窗显示默认文案，并提示 “内容加载超时，显示默认联系方式”。

## 六、管理员后台功能

### 6.1 题库管理



* 题库预览：按维度分类展示题目（序号、表述、选项类型），支持关键词搜索；

* 版本管理：记录题库版本变更历史，支持查看各版本差异，题目仅支持查看不支持修改（保障量表信效度）；

* 选项绑定：后台建立题目与选项类型的固定绑定，防止误操作导致不匹配。

### 6.2 常模管理



* 常模设置：针对各题库版本，独立设置四大维度的常模均值（μ）与标准差（σ）；

* 数据导入：支持 Excel 格式导入常模数据（含维度名称、均值、标准差、样本量），导入后自动校验合理性；

* 版本标注：常模更新后标注版本号，同步至报告显示。

### 6.3 数据统计


* 配置使用统计：记录 “获取授权码” 按钮点击次数、链接跳转成功率、“商务合作” 按钮点击次数，生成月度统计报表。

### 6.4 系统设置（新增链接与文案配置）



* **“获取授权码” 链接配置**：


  * 界面：输入框（ placeholder“请输入小红书店铺链接或其他授权码获取渠道链接（需含 http/https）”）、格式校验提示、保存按钮、重置按钮；

  * 功能：支持实时预览链接（点击 “预览” 按钮在新标签页打开链接），保存后前端立即生效；

  * 日志：记录每次修改的时间、修改人、旧链接、新链接，支持导出日志；

* **“商务合作” 文案配置**：


  * 界面：文本输入框（支持换行， placeholder“请输入商务合作联系方式或合作说明，最多 200 字符”）、字符数统计、预览按钮、保存按钮、重置按钮；

  * 功能：点击 “预览” 按钮弹出模拟弹窗，查看文案在前端的显示效果（区分 PC 端与移动端样式），保存后前端立即生效；

  * 默认值：系统预设默认文案 “商务合作，请联系客服，微信：renzhi6767”，管理员未配置时前端显示默认值；

* **权限控制**：仅 “超级管理员” 或 “配置管理员” 角色可修改链接与文案，其他角色仅支持查看配置内容，确保操作安全性。

## 七、技术实现特殊要求

### 7.1 题库数据存储格式

采用 JSON 格式存储，示例如下：



```
{

&#x20; "questionBankVersion": "V1.0",

&#x20; "selfTestQuestions": \[

&#x20;   {

&#x20;     "questionId": 1,

&#x20;     "dimension": "控制欲望",

&#x20;     "questionContent": "XXX",

&#x20;     "optionType": "attitude", // attitude=态度类，frequency=频率类

&#x20;     "options": \[

&#x20;       {"optionId": 1, "optionContent": "非常不同意", "score": 1},

&#x20;       {"optionId": 2, "optionContent": "不同意", "score": 2},

&#x20;       {"optionId": 3, "optionContent": "中性", "score": 3},

&#x20;       {"optionId": 4, "optionContent": "同意", "score": 4},

&#x20;       {"optionId": 5, "optionContent": "非常同意", "score": 5}

&#x20;     ]

&#x20;   }

&#x20; ],

&#x20; "loverTestQuestions": \[/\* 结构一致，仅questionContent调整为"Ta"表述 \*/]

}
```

### 7.2 RPI 计算算法实现



* z 分数计算：处理原始分超出常模范围的情况，避免极端值异常；

* CDF 函数：采用误差函数近似计算，确保百分位数转换精准；

* 计算缓存：缓存各步骤结果，修改答案时仅重新计算对应维度数据，提升效率。

### 7.3 答题数据校验



* 选项合法性：校验

> （注：文档部分内容可能由 AI 生成）